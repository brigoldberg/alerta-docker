# Docker compose for Alerta

version: '2.1'
services:

  alerta-server:
    image: alerta-server
    container_name: alerta-server
    hostname: alerta-server
    environment:
      TZ: "America/New_York"
    ports:
      - "7001:80"
    command: "/usr/bin/supervisord -c /etc/supervisord.conf"

  alerta-web-ui:
    image: alerta-web-ui
    container_name: alerta-web-ui
    hostname: alerta-web-ui
    environment:
      TZ: "America/New_York"
    ports:
      - "80:80"
    command: "/usr/bin/supervisord -c /etc/supervisord.conf"

  mongodb:
    image: mongodb
    container_name: mongodb
    hostname: mongodb
    environment:
      TZ: "America/New_York"
    ports:
      - "27017:27017"
    volumes:
        - alerta-db:/data/db
    command: "/usr/bin/supervisord -c /etc/supervisord.conf"

networks:
  default:
    external:
      name: "monitor_net"

volumes:
  alerta-db:
    external: true
